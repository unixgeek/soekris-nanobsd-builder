# /usr/src/tools/build/options/WITHOUT_INSTALLLIB -- this is currently borked.

NANO_NAME=net5501
NANO_ARCH=i386
NANO_KERNEL=NET5501
NANO_BOOT2CFG="-h"
#NANO_CODESIZE=262144
NANO_CODESIZE=479232
NANO_DATASIZE=-1
# NANO_OBJ=/build/obj
NANO_PMAKE="make -j $(sysctl -n hw.ncpu)"
NANO_IMGNAME="image.full"
NANO_IMG1NAME="image.partition"

CONF_BUILD='
NO_MODULES=YES
'

CONF_INSTALL='
WITHOUT_BINUTILS=YES
WITHOUT_BMAKE=YES
WITHOUT_CLANG=YES
WITHOUT_CPP=YES
WITHOUT_CXX=YES
WITHOUT_GCC=YES
WITHOUT_INSTALLLIB=YES
WIHTOUT_LLDB=YES
WITHOUT_MAKE=YES
WITHOUT_TOOLCHAIN=YES
'

CONF_WORLD='
WITHOUT_ACCT=YES
WITHOUT_ACPI=YES
WITHOUT_AMD=YES
WITHOUT_APM=YES
WITHOUT_ASSERT_DEBUG=YES
WITHOUT_AT=YES
WITHOUT_ATF=YES
WITHOUT_ATM=YES
WITHOUT_AUDIT=YES
WITHOUT_AUTHPF=YES
WITHOUT_BLUETOOTH=YES
WITHOUT_BSD_CPIO=YES
WITHOUT_BSNMP=YES
WITHOUT_CALENDAR=YES
WITHOUT_CAPSICUM=YES
WITHOUT_CTF=YES
WITHOUT_CTM=YES
WITHOUT_DICT=YES
WITHOUT_EXAMPLES=YES
WITHOUT_FLOPPY=YES
WITHOUT_FREEBSD_UPDATE=YES
WITHOUT_GAMES=YES
WITHOUT_GDB=YES
WITHOUT_GCOV=YES
WITHOUT_GNU_SUPPORT=YES
WITHOUT_GOOGLETEST=YES
WITHOUT_GPIB=YES
WITHOUT_GPIO=YES
WITHOUT_GROFF=YES
WITHOUT_GSSAPI=YES
WITHOUT_HESIOD=YES
WITHOUT_HTML=YES
WITHOUT_INET6=YES
WITHOUT_INFO=YES
WITHOUT_IPFILTER=YES
WITHOUT_IPFW=YES
WITHOUT_IPX=YES
WITHOUT_JAIL=YES
WITHOUT_KDUMP=YES
WITHOUT_KERBEROS=YES
WITHOUT_KERNEL_SYMBOLS=YES
WITHOUT_KVM=YES
WITHOUT_LDNS=YES
WITHOUT_LEGACY_CONSOLE=YES
WITHOUT_LOCATE=YES
WITHOUT_LPR=YES
WIHTOUT_LS_COLORS=YES
WITHOUT_MAIL=YES
WITHOUT_MAN=YES
WITHOUT_NDIS=YES
WITHOUT_NETCAT=YES
WITHOUT_NETGRAPH=YES
WITHOUT_NIS=YES
WITHOUT_NLS=YES
WITHOUT_NS_CACHING=YES
WITHOUT_PC_SYSINSTALL=YES
WITHOUT_PF=YES
WITHOUT_PKGBOOTSTRAP=YES
WITHOUT_PKGTOOLS=YES
WITHOUT_PMC=YES
WITHOUT_PORTSNAP=YES
WITHOUT_PPP=YES
WITHOUT_PROFILE=YES
WITHOUT_QUOTAS=YES
WITHOUT_RCMDS=YES
WITHOUT_RCS=YES
WITHOUT_RESCUE=YES
WITHOUT_ROUTED=YES
WITHOUT_SENDMAIL=YES
WITHOUT_SHAREDOCS=YES
WITHOUT_SVN=YES
WITHOUT_SVNLITE=YES
WITHOUT_SYSINSTALL=YES
WITHOUT_SYSCONS=YES
WITHOUT_TCSH=YES
WITHOUT_TELNET=YES
WITHOUT_TEXTPROC=YES
WITHOUT_UNBOUND=YES
WITHOUT_USB=YES
WITHOUT_USB_GADGET_EXAMPLES=YES
WITHOUT_UTMPX=YES
WITHOUT_WIRELESS=YES
WITHOUT_ZFS=YES
WITHOUT_CDDL=YES

'


NANO_CFGDIR="/vagrant/net5501/files/cfg"

tweaks() {
	cp /vagrant/net5501/files/root/boot.config    ${NANO_WORLDDIR}
	cp /vagrant/net5501/files/root/loader.conf    ${NANO_WORLDDIR}/boot
	cp /vagrant/net5501/files/root/ttys           ${NANO_WORLDDIR}/etc
	cp /vagrant/net5501/files/root/newsyslog.conf ${NANO_WORLDDIR}/etc
	cp /vagrant/net5501/files/root/syslog.conf    ${NANO_WORLDDIR}/etc
	cp /vagrant/net5501/files/root/fstab          ${NANO_WORLDDIR}/etc
	cp /vagrant/net5501/files/cfg/rc.conf         ${NANO_WORLDDIR}/cfg
	rm -fr ${NANO_WORLDDIR}/usr/tests
	mv ${NANO_WORLDDIR}/usr/share/locale/en_US.UTF-8 /tmp
	mv ${NANO_WORLDDIR}/usr/share/locale/C.UTF-8 /tmp
	rm -fr ${NANO_WORLDDIR}/usr/share/locale/*
	mv /tmp/en_US.UTF-8 ${NANO_WORLDDIR}/usr/share/locale/
	mv /tmp/C.UTF-8 ${NANO_WORLDDIR}/usr/share/locale/
	mkdir ${NANO_WORLDDIR}/data
}

FlashDevice SanDisk 1G

customize_cmd cust_install_files

late_customize_cmd tweaks
